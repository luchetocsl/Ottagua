---
import { type CollectionEntry, getCollection } from 'astro:content';
import BlogPost from '../../layouts/BlogPost.astro';


export async function getStaticPaths() {
	const posts = await getCollection('blog');
	return posts.map((post) => {
		const slug = (post.data.slug || post.slug).replace(/\s+/g, '-');
		return {
			params: { slug },
			props: {
				post,
				allPosts: posts,
			},
		};
	});
}

interface Props {
	post: CollectionEntry<'blog'>;
	allPosts: CollectionEntry<'blog'>[];
}

const { post, allPosts } = Astro.props;
const { Content } = await post.render();
const currentSlug = (post.data.slug || post.slug).replace(/\s+/g, '-');
---

<BlogPost {...post.data} currentSlug={currentSlug} allPosts={allPosts} >

		<Content />

</BlogPost>


