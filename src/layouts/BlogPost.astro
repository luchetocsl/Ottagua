---
import type { CollectionEntry } from "astro:content";
import { Image } from "astro:assets";
import FormattedDate from "../components/FormattedDate.astro";
import BaseLayout from "./BaseLayout.astro";
import BlogNavigation from "../components/BlogNavigation.astro";

type Props = CollectionEntry<"blog">["data"] & {
  currentSlug?: string;
  allPosts?: CollectionEntry<"blog">[];
};

const { title, pubDate, updatedDate, heroImage, currentSlug, allPosts } = Astro.props;
---

<BaseLayout>
	<main class="w-full">
		<!-- Full-width hero image container -->
		<div class="w-full max-w-full mb-8 overflow-hidden">
			<div class="max-w-[1800px] mx-auto px-4 flex justify-center">
				{
					heroImage && (
						<Image 
							width={1800} 
							height={500} 
							src={heroImage} 
							alt={title} 
							class="rounded-lg w-full h-[50vh] object-cover object-center mb-8" 
						/>
					)
				}
			</div>
		</div>

		<!-- Content container with 1240px max width -->
		<div class="max-w-[1240px] mx-auto px-4">
			<article class="text-red max-w-prose mx-auto leading-7">
				<div class="flex flex-col items-start mb-8">
					<h1 class="text-4xl font-bold leading-tight mb-4">{title}</h1>
					<div class="text-left">
						<FormattedDate date={pubDate} />
						{
							updatedDate && (
								<div class="text-sm mt-1">
									Last updated on{" "}
									<FormattedDate date={updatedDate} />
								</div>
							)
						}
					</div>
				</div>

				<div class="prose prose-red prose-headings:text-red prose-headings:font-bold prose-headings:leading-tight prose-h1:text-4xl prose-h1:mt-0 prose-h1:mb-8 prose-h2:text-3xl prose-h2:mb-6 prose-h3:text-2xl prose-h3:mt-8 prose-h3:mb-4 prose-h4:text-xl prose-h4:mt-6 prose-h4:mb-3 prose-p:my-5 prose-p:leading-7 prose-p:text-lg prose-a:text-red prose-a:underline prose-a:decoration-2 prose-a:underline-offset-4 prose-a:font-medium prose-a:transition-colors prose-a:hover:text-red-accent prose-blockquote:my-8 prose-blockquote:py-6 prose-blockquote:px-8 prose-blockquote:border-l-4 prose-blockquote:border-red-accent prose-blockquote:italic prose-blockquote:text-red-accent prose-blockquote:rounded-lg prose-blockquote:bg-red-50/5 prose-ul:my-6 prose-ul:pl-6 prose-ol:my-6 prose-ol:pl-6 prose-li:my-3 prose-li:pl-1.5 prose-li:leading-7 prose-li:text-lg prose-img:my-8 prose-figure:my-8 prose-figcaption:mt-3 prose-figcaption:text-sm prose-figcaption:text-red-accent">
					<slot />
				</div>
				
				{currentSlug && allPosts && (
					<BlogNavigation currentSlug={currentSlug} posts={allPosts} />
				)}
			</article>
		</div>
	</main>
</BaseLayout>

<!-- All styling now handled by Tailwind Typography plugin modifiers in the markup -->
