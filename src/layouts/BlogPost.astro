---
import type { CollectionEntry } from "astro:content";
import FormattedDate from "../components/FormattedDate.astro";
import BaseLayout from "./BaseLayout.astro";

type Props = CollectionEntry<"blog">["data"];

const { title, description, pubDate, updatedDate, heroImage } = Astro.props;
---

<BaseLayout>
	<main>
		<article>
			<div class='hero-image'>
				{
					heroImage && (
						<img width={1020} height={510} src={heroImage} alt='' />
					)
				}
			</div>

			<div class='blog-details'>
				<h1>{title}</h1>
				<div class='date'>
					<FormattedDate date={pubDate} />
					{
						updatedDate && (
							<div class='last-updated-on'>
								Last updated on{" "}
								<FormattedDate date={updatedDate} />
							</div>
						)
					}
				</div>
			</div>

			<div class='prose'>
				<slot />
			</div>
		</article>
	</main>
</BaseLayout>

<style>
	.hero-image > img {
		border-radius: 2rem;
		margin-bottom: 2rem;
	}

	.blog-details {
		display: flex;
		flex-direction: row;
		justify-content: space-between;
		align-items: flex-end;
		margin-bottom: 2rem;

		h1 {
			max-width: 80%;
			font-size: 3.167rem;
			line-height: 1.193;
			margin-bottom: 0;
		}

		.date {
			width: 20%;
			text-align: right;
		}
	}

	main {
		max-width: 80ch;
	}

	article {
		h1 {
			margin-bottom: 2rem;
		}

		h2 {
			margin-top: 2rem;
			margin-bottom: 1rem;
		}

		h4 {
			margin-top: 1rem;
		}

		ul li,
		ol li {
			margin-bottom: 0.5rem;

			&:last-child {
				margin-bottom: 2rem;
			}
		}

		.footnotes {
			flex-direction: column;
		}
	}
</style>
