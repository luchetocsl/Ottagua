---
import type { CollectionEntry } from "astro:content";
import { Image } from "astro:assets";
import FormattedDate from "../components/FormattedDate.astro";
import BaseLayout from "./BaseLayout.astro";
import BlogNavigation from "../components/BlogNavigation.astro";

type Props = CollectionEntry<"blog">["data"] & {
  currentSlug?: string;
  allPosts?: CollectionEntry<"blog">[];
};

const { title, pubDate, updatedDate, heroImage, currentSlug, allPosts } = Astro.props;
---

<BaseLayout>
	<main>

		<div class='hero-image-container'>
			<div class='hero-image'>
				{
					heroImage && (
						<Image width={1800} height={500} src={heroImage} alt={title} />
					)
				}
			</div>
		</div>

		<article>
			

			<div class='blog-details'>
				<h1>{title}</h1>
				<div class='date'>
					<FormattedDate date={pubDate} />
					{
						updatedDate && (
							<div class='last-updated-on'>
								Last updated on{" "}
								<FormattedDate date={updatedDate} />
							</div>
						)
					}
				</div>
			</div>

			<div class='prose'>
				<slot />
			</div>
			
			{currentSlug && allPosts && (
				<BlogNavigation currentSlug={currentSlug} posts={allPosts} />
			)}
		</article>
		
	</main>



</BaseLayout>

<style>
	.hero-image-container {
		width: 100vw;
		max-width: 100vw;
		margin-left: calc(50% - 50vw);
		margin-bottom: 2rem;
	}

	.hero-image {
		max-width: 1800px;
		margin: 0 auto;
		padding: 0 1rem;
		display: flex;
		justify-content: center;
	}

	.hero-image > img {
		border-radius: 1rem;
		width: 100%;
		height: 50vh;
		object-fit: cover;
		object-position: center;
		margin-bottom: 2rem;
	}

	.blog-details {
		display: flex;
		flex-direction: column;
		justify-content: space-between;
		align-items: flex-start;
		margin-bottom: 2rem;

		h1 {
			font-size: 2.25rem;
			line-height: 1.25;
			margin-bottom: 0;
		}

		.date {
			text-align: left;
		}
	}

	main {
		max-width: 80ch;
		margin: 0 auto;
		padding: 0 1rem;
	}

	article {
		/* Tailwind Typography-inspired styles */
		color: var(--red); /* Brand red color */
		max-width: 65ch;
		line-height: 1.75;

		/* Headings */
		h1, h2, h3, h4, h5, h6 {
			color: var(--red); /* Brand red for headings */
			font-weight: 700;
			line-height: 1.25;
		}

		/* Add more spacing before headings for better section separation */
		h2, h3, h4, h5, h6 {
			margin-top: 3rem; /* Increased spacing before headings */
		}

		h1 {
			margin-top: 0;
			margin-bottom: 2rem;
			font-size: 2.25rem;
		}

		h2 {
			margin-bottom: 1.5rem;
			font-size: 1.875rem;
		}

		h3 {
			margin-top: 2rem;
			margin-bottom: 1rem;
			font-size: 1.5rem;
		}

		h4 {
			margin-top: 1.5rem;
			margin-bottom: 0.75rem;
			font-size: 1.25rem;
		}

		/* Paragraph */
		p {
			margin-top: 1.25rem;
			margin-bottom: 1.25rem;
			line-height: 1.8;
		}

		/* Lists */
		ul, ol {
			margin-top: 1.5rem;
			margin-bottom: 1.5rem;
			padding-left: 1.625rem;
		}

		ul {
			list-style-type: disc;
		}

		ol {
			list-style-type: decimal;
		}

		li {
			margin-top: 0.75rem;
			margin-bottom: 0.75rem;
			padding-left: 0.375rem;
			line-height: 1.7;
		}

		li > ul, li > ol {
			margin-top: 0.75rem;
			margin-bottom: 0.75rem;
		}

		/* Blockquotes */
		blockquote {
			margin-top: 2rem;
			margin-bottom: 2rem;
			padding: 1.5rem 1.5rem 1.5rem 2rem;
			border-left: 4px solid var(--red-accent); /* Brand accent red border */
			font-style: italic;
			color: var(--red-accent); /* Brand accent red text */
			background-color: rgba(248, 92, 77, 0.05); /* Very light red background */
			border-radius: 0.5rem;
		}

		blockquote p:first-of-type::before {
			content: open-quote;
		}

		blockquote p:last-of-type::after {
			content: close-quote;
		}

		/* Code */
		code {
			color: var(--red); /* Brand red */
			font-weight: 600;
			font-size: 0.875em;
		}

		code::before,
		code::after {
			content: '`';
		}

		pre {
			margin-top: 1.25rem;
			margin-bottom: 1.25rem;
			padding: 1rem;
			border-radius: 0.375rem;
			background-color: #f3f4f6; /* gray-100 */
			overflow-x: auto;
		}

		pre code {
			color: inherit;
			font-weight: inherit;
			background-color: transparent;
			border-width: 0;
			border-radius: 0;
			padding: 0;
			font-size: 0.875em;
		}

		pre code::before,
		pre code::after {
			content: '';
		}

		/* Tables */
		table {
			width: 100%;
			margin-top: 2rem;
			margin-bottom: 2rem;
			border-collapse: collapse;
			text-align: left;
			font-size: 0.875em;
			line-height: 1.5;
		}

		thead {
			border-bottom: 1px solid #e5e7eb; /* gray-200 */
		}

		thead th {
			padding: 0.5rem;
			font-weight: 600;
			vertical-align: bottom;
		}

		tbody tr {
			border-bottom: 1px solid #e5e7eb; /* gray-200 */
		}

		tbody td {
			padding: 0.5rem;
			vertical-align: top;
		}

		/* Images */
		img {
			margin-top: 2rem;
			margin-bottom: 2rem;
		}

		figure {
			margin-top: 2rem;
			margin-bottom: 2rem;
		}

		figure > * {
			margin-top: 0;
			margin-bottom: 0;
		}

		figcaption {
			margin-top: 0.75rem;
			font-size: 0.875em;
			color: var(--red-accent); /* Brand accent red */
		}

		/* Links */
		a {
			color: var(--red); /* Brand red */
			text-decoration: underline;
			text-decoration-thickness: 2px;
			text-underline-offset: 4px;
			font-weight: 500;
			transition: color 0.2s ease-in-out;
		}

		/* Fix for heading links to prevent multiple underlines */
		h1 a, h2 a, h3 a, h4 a, h5 a, h6 a {
			text-decoration: none;
		}

		a:hover {
			color: var(--red-accent); /* Brand accent red on hover */
		}

		/* Horizontal rule - keeping it red as requested */
		hr {
			border: none;
			height: 2px;
			background-color: var(--red); /* Brand red color */
			margin: 3rem 0;
		}

		/* Footnotes */
		.footnotes {
			margin-top: 3rem;
			font-size: 0.875em;
			color: var(--red-accent); /* Brand accent red */
			flex-direction: column;
		}
	}
</style>
